---
import '../styles/Style.astro';
import '../styles/Normalize.astro';

const navigationLinks = [
  {name: 'Blog', href: '/blog/'},
  {name: 'About', href: '/about'},
  {name: 'Contact', href: '/contact'}
];
---

<!-- Main Header -->
<header id="main-header" class="site-header">
  <a class="skip-to-link" href="#main-content">Skip to main content</a>

  <!-- Logo -->
  <div class="logo-container">
    <a class="site-title" href="/" aria-current="page">
      <svg id="Layer_2" class="site-logo" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600" role="img">
        <path class="cls-1" d="m490.27,449.65v6c0,6.07-4.93,11-11,11-3.04,0-5.79,1.23-7.78,3.22s-3.22,4.74-3.22,7.78v47c0,6.07-4.93,11-11,11H142.27c-6.08,0-11-4.93-11-11v-188c0-6.08,4.92-11,11-11h315c6.07,0,11,4.92,11,11v50c0,6.07-4.93,11-11,11h-244c-4.46,0-8.29,2.64-10.02,6.45-.63,1.38-.98,2.93-.98,4.55v47c0,6.07,4.92,11,11,11h175c6.07,0,11-4.93,11-11v-6c0-6.08,4.92-11,11-11h69c6.07,0,11,4.92,11,11Z"/>
        <path class="cls-1" d="m491.27,75.61v49.79c0,6.22-5.04,11.26-11.26,11.26-3.11,0-5.92,1.26-7.95,3.3-2.04,2.03-3.3,4.84-3.3,7.95v115.19c0,6.21-5.04,11.25-11.26,11.25H142.52c-6.22,0-11.25-5.04-11.25-11.25v-74.32c0-6.21,5.03-11.25,11.25-11.25h46.92c6.21,0,11.25,5.04,11.25,11.25v5.47c0,1.24.2,2.43.57,3.54,1.48,4.48,5.71,7.71,10.69,7.71h173.61c5.67,0,10.36-4.19,11.13-9.65.08-.52.12-1.06.12-1.6v-46.34c0-6.21-5.04-11.25-11.25-11.25h-243.04c-6.22,0-11.25-5.04-11.25-11.26v-49.79c0-6.22,5.03-11.26,11.25-11.26h337.49c6.22,0,11.26,5.04,11.26,11.26Z"/>
        <path class="cls-2" d="m439.81,325.65c-5.03,27.61-18.04,52.44-36.56,72h-189.98c-4.46,0-8.29,2.64-10.02,6.45-21.97-20.42-37.46-47.71-43.06-78.45h279.62Z"/>
        <path class="cls-2" d="m439.81,274.35H160.19c5.43-29.8,20.16-56.36,41.07-76.56,1.48,4.48,5.71,7.71,10.69,7.71h173.61c5.67,0,10.36-4.19,11.13-9.65,22,20.42,37.51,47.73,43.12,78.5Z"/>
      </svg>
      <span>Jason Garvin</span>
    </a>
  </div>

  <!-- Hamburger Icon -->
  <input class="side-menu" type="checkbox" id="side-menu" />
  <label class="hamb" for="side-menu">
    <span class="hamb-line"></span>
  </label>

  <!-- Menu -->
  <nav id="main-nav" aria-label="Site Navigation">
    <ul class="main-menu">
      {navigationLinks.map((link) => (
        <li>
          <a class="menu-item" href={link.href}><span>{link.name}</span></a>
        </li>
        ))
      }
    </ul>
  </nav>
</header>

<script src="../assets/scripts/header-controller.js"></script>

<style>
  .site-header {
    position: fixed;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    padding-bottom: 1rem;
    -webkit-box-pack: justify;
        -ms-flex-pack: justify;
            justify-content: space-between;
    z-index: 1;
    background-color: var(--background, #fff);
    -webkit-box-shadow: 0 1px 2px var(--header-shadow, rgba(0, 0, 0, 0.4));
            box-shadow: 0 1px 2px var(--header-shadow, rgba(0, 0, 0, 0.4));
    border-bottom-right-radius: 50px;
    border-bottom-left-radius: 50px;

    -webkit-transition: top 0.2s ease-in-out;
    transition: top 0.2s ease-in-out;
  }

  /* --- Header Logo & Title --- */

  .logo-container {
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    margin: 1.5rem 0 0;
    text-align: left;
    -webkit-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
  }

  #error-404 .logo-container {
    margin: 1.5rem 1rem;
  }

  .site-logo {
    min-width: 3.2rem;
    max-width: 6rem;
  }

  /* Targetting parts of the SVG */
  .site-logo .cls-1 {
    fill: var(--brand-primary, #3066be);
  }

  .site-logo .cls-1,
  .site-logo .cls-2 {
    stroke-width: 0px;
  }

  .site-logo .cls-2 {
    fill: var(--brand-highlight);
  }
  /* End targetting parts of the SVG */

  .site-title {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;

    font-family: "PT Serif", serif;
    font-size: calc(2rem + 0.5vw);
    font-weight: 700;
  }

  .site-title span {
    max-width: 10rem;
    line-height: 1.4;
  }

  .site-title:hover,
  .site-title:hover span{
    color: var(--brand-primary, #3066be);
  }

  /* --- Header Navigation  --- */

  #main-nav {
    position: fixed;
    top: 0;
    height: 100%;
    width: 100%;
    max-height: 0;
    margin: 0;
    overflow: hidden;
    z-index: 5;

    background-color: var(--background-shade, #f8f8f8);

    -webkit-transition: max-height 0.4s ease-out;

    transition: max-height 0.4s ease-out;
  }

  .main-menu {
    padding: 130px 0;
    margin: 0;
    list-style-type: none;
  }

  .main-menu li {
    width: 75%;
  }

  .menu-item {
    display: block;
    position: relative;
    padding: 2rem 2rem 1.5rem;
    font-size: 1.6rem;
    color: var(--core-monotone, #00171f);
  }

  a.menu-item:visited {
    color: var(--core-monotone, #00171f);
  }

  a.menu-item:hover {
    color: var(--core-monotone, #00171f);
  }

  .menu-item span {
    padding: 0.25rem 0;
    background-color: transparent;
    background-image: -webkit-gradient(linear, left top, left bottom, from(var(--core-monotone)), to(var(--core-monotone)));
    background-image: linear-gradient(var(--core-monotone), var(--core-monotone));
    background-position: 0% 100%;
    background-repeat: no-repeat;
    background-size: 0% 1px;

    -webkit-transition: background 0.2s ease-in;

    transition: background 0.2s ease-in;
  }

  .menu-item:hover span {
    background-size: 100% 1px;
    -webkit-transition: background 0.2s ease-out;
    transition: background 0.2s ease-out;
  }

  .active-page span {
    background-size: 100% 1px;
  }

  /* --- Header Hamburger Menu Icon --- */

  .side-menu {
    display: none;
  }

  .hamb {
    position: relative;
    cursor: pointer;
    padding: 30px 1.5rem 30px;
    margin-top: 1rem;
    z-index: 10;
  }

  .hamb-line {
    background: var(--mono-emphasis);
    display: block;
    height: 3px;
    position: relative;
    width: 30px;
    z-index: 10;
  }

  .hamb-line::before,
  .hamb-line::after {
    background: var(--mono-emphasis);
    content: '';
    display: block;
    height: 100%;
    position: absolute;
    -webkit-transition: all .2s ease-out;
    transition: all .2s ease-out;
    width: 100%;
  }

  .hamb-line::before {
    top: 8px;
  }

  .hamb-line::after {
    top: -8px;
  }

  .side-menu:checked ~ #main-nav {
    max-height: 100%;
  }

  .side-menu:checked ~ .hamb .hamb-line {
    background: transparent;
  }

  .side-menu:checked ~ .hamb .hamb-line::before {
    -webkit-transform: rotate(-45deg);
        -ms-transform: rotate(-45deg);
            transform: rotate(-45deg);
    top: 0;
  }

  .side-menu:checked ~ .hamb .hamb-line::after {
    -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
            transform: rotate(45deg);
    top: 0;
  }



  /* --- Skip to Content Link --- */

  .skip-to-link {
    display: block;
    position: absolute;
    left: 16px;
    top: 0;
    padding: 0.25rem;
    z-index: 10;
    background-color: var(--background, #fff);
    border-radius: 50px;

    -webkit-transform: translateY(-175%);

        -ms-transform: translateY(-175%);

            transform: translateY(-175%);
    -webkit-transition: -webkit-transform 0.3s;
    transition: -webkit-transform 0.3s;
    transition: transform 0.3s;
    transition: transform 0.3s, -webkit-transform 0.3s;
  }

  .skip-to-link:focus {
    -webkit-transform: translateY(12%);
        -ms-transform: translateY(12%);
            transform: translateY(12%);
  }

  @media screen and (min-width: 768px) {
    .site-header {
      left: 0;
      right: 0;
      top: 0;
      width: 96%;
      max-width: 900px;
      margin: 2rem auto 0;
      padding-bottom: 0;
      border-radius: 50px;
    }

    .logo-container {
      margin: 0.5rem 0 0 2rem;
    }

    .site-title {
      font-size: 1.5rem;
    }

    .site-title span {
      display: block;
      height: -webkit-fit-content;
      height: -moz-fit-content;
      height: fit-content;
      margin: auto 0;
    }

    #main-nav {
      position: relative;
      top: 0;
      max-height: none;
      width: -webkit-fit-content;
      width: -moz-fit-content;
      width: fit-content;
      margin: auto 3rem auto auto;
      background-color: transparent;
    }

    .hamb {
      display: none;
    }

    .main-menu {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      padding: 0;
    }

    .main-menu li {
      width: -webkit-fit-content;
      width: -moz-fit-content;
      width: fit-content;
      margin: 0.25rem;
    }

    .menu-item {
      padding: 0.25rem 1rem;
      font-size: calc(1.2rem + 0.2vw);
    }

    .active-page::after,
    .main-menu li:hover .menu-item::after {
      left: 0.35rem;
      bottom: 0.1rem;
      height: 2.6rem;
    }

    .theme-button .fa {
      margin-right: 0.5rem;
    }
  }
</style>
